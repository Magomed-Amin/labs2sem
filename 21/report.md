# Отчет по лабораторной работе № 21
## по курсу "Алгоритмы и структуры данных"

Студент группы М8О-108Б-23 Хулагов Магомед-Амин Саидович

Работа выполнена

Преподаватель: каф. 806 Севастьянов Виктор Сергеевич

1. **Тема**: Программирование на интерпретируемых командных языках
2. **Цель работы**: Составить программу выполнения заданных действий на одном из интерпретируемых командных языков 
(Shell).
3. **Задание (Вариант №2)**: Составить программу на языке Shell, обеспечивающую объединение в один файл всех файлов с 
указанным суффиксом, имеющих размер меньше заданного. 
4. **Идея, метод, алгоритм решения задачи**:
    - Составить программу на языке Shell, обеспечивающую:
      - объединение всех файлов, расположенных в текущей директории в одн файл;
      - удаление объединённых файлов (опционально);
      - вывод информации о процессе объединения (опционально);
      - вывод справочной информации о возможностях программы.
5. **Сценарий выполнения работы**:
    1. С помощью условного оператора проверить, был ли при запуске программы введён параметр ```?```. Если да, то 
вывести в консоль справочную о синтаксисе и параметрах программы.
    2. С помощью команды ```$(dirname "$0")``` получить имя текущей директории.
    3. цикле ```for name in "$home"/*``` приступить к перебору файлов и директорий, расположенных в текущей директории.
    4. С помощью условия ```-f $name``` проверить, является ли очередной объект файлом.
    5. С помощью команды ```${name##*.}``` получить суффикс файла.
    6. С помощью команды ```$(stat -c %s "$name")``` получить размер файла в байтах.
    7. Проверить, что размер файла меньше заданного, а суффикс соответствует заданному с помощью условия 
    ```$size -le $1 && $extension = "$2"```.
    8. Приписать содержимое подходящего по предыдущему условию файла к файлу, имя которого было задано в параметрах
    программы, с помощью команды ```"$name" >> "$3"```.
    9. Проверить наличие среди параметров флага ```-i``` с помощью условия ```$4 = "-i" || $5 = "-i"```,
    и при его наличии, вывести информацию об имени обработанного файла с помощью команды ```$(basename -- "$name")```.
    10. Проверить наличие среди параметров флага ```-d``` с помощью условия ```$4 = "-d" || $5 = "-d"```,
    и при его наличии, удалить очередной исходный файл с помощью команды ```rm "$name"```.
    11. В конце программы, в случае наличия флага ```-i``` вывести сообщение о завершении процесса и с помощью команды
    ```read -r``` предотвратить самопроизвольное закрытие терминала.

6. **Листинг**:
   - Отладка программы производилась в среде ОС Windows с помощью интерпретатора Git Bash.
     - Пример использования:
        - ```shell
          ./21.sh ?
             
          Usage:
            ./21.sh <maximum file size (bytes)> <suffix> <output file name> [-i] [-d]

            Keys:
                -i    Show information about the progress of the merger
                -d    Delete source files
          ```
        - ```shell
          ./21.sh 100 tst test.txt -i -d

          INFO: file <test.tst> insert_to_begin to <test.txt>
          INFO: completed

          ```
        - Файл с исходным кодом программы на языке Shell: [21.sh](21.sh).

7. **Замечания автора** по существу работы: отсутствуют.
8. **Выводы**: Написана и отлажена программа обработки файлов на языке Shell. Получен опыт работы с командным 
интерпретируемым языком, составления программ (скриптов) в командной оболочке Bash (Shell). 
